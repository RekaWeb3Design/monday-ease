

# Member Dashboard Multi-Board Tab System

## Ã–sszefoglalÃ³

A Member Dashboard Ã¡talakÃ­tÃ¡sa, hogy a taskok board-onkÃ©nt tabulÃ¡torokban legyenek szervezve. Az elsÅ‘ tab minden taskot mutat (jelenlegi viselkedÃ©s), a tovÃ¡bbi tabok pedig board-onkÃ©nt szÅ±rik a taskokat.

## FelhasznÃ¡lÃ³i Ã‰lmÃ©ny

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ My Tasks                                              [ğŸ”„ Refresh]       â”‚
â”‚ Welcome back, John! Here are your assigned tasks.                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  [ ğŸ“‹ All Tasks (24) ]  [ Tasks (12) ]  [ Deliverables (8) ]  [ ... ]  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                     â”‚
â”‚                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Total: 24    â”‚ â”‚ In Progress  â”‚ â”‚ Done: 8      â”‚ â”‚ Stuck: 2     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Task Card 1   â”‚ â”‚ Task Card 2   â”‚ â”‚ Task Card 3   â”‚                  â”‚
â”‚  â”‚ [Board badge] â”‚ â”‚ [Board badge] â”‚ â”‚ [Board badge] â”‚ â† "All" tab-on   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technikai Terv

### FÃ¡jl 1: `src/pages/MemberDashboard.tsx`

**VÃ¡ltozÃ¡sok:**

1. **Ãšj importok:**
```typescript
import { useState, useMemo } from "react";
import { Tabs, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { LayoutList } from "lucide-react";
```

2. **Tab Ã¡llapot kezelÃ©s:**
```typescript
const [activeTab, setActiveTab] = useState<string>("all");
```

3. **Board-ok kinyerÃ©se Ã©s taskok szÅ±rÃ©se (useMemo):**
```typescript
// Extract unique boards from tasks
const boards = useMemo(() => {
  const boardMap = new Map<string, string>();
  tasks.forEach(task => {
    if (!boardMap.has(task.board_id)) {
      boardMap.set(task.board_id, task.board_name);
    }
  });
  return Array.from(boardMap.entries()).map(([id, name]) => ({ id, name }));
}, [tasks]);

// Filter tasks based on active tab
const filteredTasks = useMemo(() => {
  if (activeTab === "all") return tasks;
  return tasks.filter(task => task.board_id === activeTab);
}, [tasks, activeTab]);
```

4. **Tab komponens beillesztÃ©se (header Ã©s stats kÃ¶zÃ©):**
```typescript
{/* Tab Navigation */}
{boards.length > 0 && (
  <Tabs value={activeTab} onValueChange={setActiveTab}>
    <TabsList className="h-auto flex-wrap justify-start gap-1 bg-transparent p-0">
      <TabsTrigger 
        value="all" 
        className="data-[state=active]:bg-primary data-[state=active]:text-primary-foreground"
      >
        <LayoutList className="mr-1.5 h-4 w-4" />
        All Tasks ({tasks.length})
      </TabsTrigger>
      {boards.map((board) => (
        <TabsTrigger 
          key={board.id} 
          value={board.id}
          className="data-[state=active]:bg-primary data-[state=active]:text-primary-foreground"
        >
          {board.name} ({tasks.filter(t => t.board_id === board.id).length})
        </TabsTrigger>
      ))}
    </TabsList>
  </Tabs>
)}
```

5. **Stats Ã©s TaskCard frissÃ­tÃ©se:**
```typescript
{/* Stats row - pass filtered tasks */}
<TaskStats tasks={filteredTasks} />

{/* Task grid - pass filtered tasks and showBoardName prop */}
<div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
  {filteredTasks.map((task) => (
    <TaskCard 
      key={task.id} 
      task={task} 
      showBoardName={activeTab === "all"} 
    />
  ))}
</div>
```

---

### FÃ¡jl 2: `src/components/member/TaskCard.tsx`

**VÃ¡ltozÃ¡sok:**

1. **Interface bÅ‘vÃ­tÃ©se:**
```typescript
interface TaskCardProps {
  task: MondayTask;
  showBoardName?: boolean;  // New prop
}
```

2. **Prop destruktÃºra frissÃ­tÃ©se:**
```typescript
export function TaskCard({ task, showBoardName = true }: TaskCardProps) {
```

3. **Board name badge feltÃ©teles megjelenÃ­tÃ©se:**
```typescript
<div className="flex items-center gap-2 pt-1">
  {showBoardName && (
    <Badge variant="outline" className="text-xs">
      {task.board_name}
    </Badge>
  )}
  {statusCol && statusText && (() => {
    // ... existing status badge logic
  })()}
</div>
```

---

### FÃ¡jl 3: `src/components/member/TaskStats.tsx`

**Nincs vÃ¡ltozÃ¡s szÃ¼ksÃ©ges!** A TaskStats mÃ¡r helyesen mÅ±kÃ¶dik - a kapott `tasks` tÃ¶mb alapjÃ¡n szÃ¡molja a statisztikÃ¡kat. Mivel a MemberDashboard a `filteredTasks`-ot fogja Ã¡tadni, a statisztikÃ¡k automatikusan az aktÃ­v tab szerinti taskokat fogjÃ¡k mutatni.

---

## ViselkedÃ©s Ã–sszefoglalÃ³

| Helyzet | ViselkedÃ©s |
|---------|------------|
| 0 task Ã¶sszesen | Jelenlegi Ã¼res Ã¡llapot (tab-ok nÃ©lkÃ¼l) |
| 1 board, N task | Tab-ok megjelennek: "All Tasks (N)" + "BoardName (N)" |
| M board, N task | Tab-ok: "All Tasks (N)" + M darab board tab |
| "All Tasks" tab aktÃ­v | Stats: Ã¶sszes task, Cards: board badge lÃ¡thatÃ³ |
| Board tab aktÃ­v | Stats: csak az adott board taskjai, Cards: board badge rejtett |
| Refresh gomb | Ãšjra lekÃ©ri az Ã¶sszes taskot, tab "all"-on marad |

## Mobil ViselkedÃ©s

A TabsList `flex-wrap` stÃ­lussal rendelkezik, Ã­gy mobil nÃ©zetben a tabok tÃ¶bb sorba tÃ¶rdelÅ‘dnek ha szÃ¼ksÃ©ges. AlternatÃ­vakÃ©nt ScrollArea-val horizontÃ¡lisan gÃ¶rgethetÅ‘vÃ© is tehetÅ‘.

## Nem VÃ¡ltozik

- Edge Function (`get-member-tasks`) - nincs mÃ³dosÃ­tÃ¡s
- API hÃ­vÃ¡sok - nincs Ãºj hÃ­vÃ¡s
- TÃ­pusok (`types/index.ts`) - nincs mÃ³dosÃ­tÃ¡s
- SzÃ­nes stÃ¡tusz badge-ek - vÃ¡ltozatlanul mÅ±kÃ¶dnek
- Routing - nincs Ãºj route

